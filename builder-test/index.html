<!DOCTYPE html>
<html lang="en">
	<head>
		
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-RZFM0HF9CZ"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
			
			gtag('config', 'G-RZFM0HF9CZ');
		</script>
	
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Board Builder Studio</title>
		<link rel="stylesheet" href="styles/main.css">
<link rel="stylesheet" href="styles/auth.css">
<link rel="stylesheet" href="styles/tabs.css">
<link rel="stylesheet" href="styles/grid.css">
<link rel="stylesheet" href="styles/tiles.css">
<link rel="stylesheet" href="styles/forms.css">
<link rel="stylesheet" href="styles/board-display.css">
<link rel="stylesheet" href="styles/editor.css">
<link rel="stylesheet" href="styles/search.css">
<link rel="stylesheet" href="styles/cards.css">
        <link href="https://cdn.jsdelivr.net/npm/quill@2.0.2/dist/quill.snow.css" rel="stylesheet" />
	</head>
	
	<body>

        <div id="authContainer">
            <div id="loginBox">
                <h2>Admin Login</h2>
                <p>Username: admin@ythmp.maps</p>
                <input type="password" id="passwordInput" placeholder="Enter Password">
                <button id="loginButton">Login</button>
                <p id="loginError"></p>
            </div>
        </div>

        <div id="appContainer" style="display: none;">

            <header>
                <h1>Board Builder Studio</h1>
                <button id="logoutButton">Logout</button>
            </header>

            <div class="tabs">
    <button class="tablink active" data-tab="newMapTab">New Map</button>
    <button class="tablink" data-tab="editMapTab">Edit/View Maps</button>
    <button class="tablink" data-tab="allMapsTab">View All Maps</button>
</div>

<div id="editMapTab" class="tabcontent" style="display:none;">
    <h2>Edit or View Maps</h2>
    
    <div id="searchContainer">
        <h3>Search by Chest Combination</h3>
        <form id="searchChestForm">
            <div class="search-inputs-wrapper">
                <div class="chest-input-search">
                    <img src="chests1.png" alt="Small Chest">
                    <select id="searchSmallChests" name="smallChests">
                        </select>
                </div>
                
                <div class="chest-input-search">
                    <img src="chests2.png" alt="Medium Chest">
                    <select id="searchMediumChests" name="mediumChests">
                    </select>
                </div>
                
                <div class="chest-input-search">
                    <img src="chests3.png" alt="Large Chest">
                    <select id="searchLargeChests" name="largeChests">
                    </select>
                </div>
                
                <div class="chest-input-search">
                    <img src="chests4.png" alt="Extra Large Chest">
                    <select id="searchExtraLargeChests" name="extraLargeChests">
                    </select>
                </div>
            </div>

            <div class="search-controls-wrapper">
                <div class="button-container">
                    <button type="submit" id="showMapsButton">Show Maps</button>
                    <button type="button" id="clearSearchButton">Clear Search</button>
                </div>

                <div class="view-options">
                    <label for="columnSelector">Columns:</label>
                    <select id="columnSelector">
                        <option value="1">1</option>
                        <option value="2" selected>2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                    </select>
                </div>
            </div>
        </form>

        <h3 class="search-divider">Or Search by Map ID</h3>
        <form id="idSearchForm">
            <input type="text" id="mapIdSearchInput" placeholder="4-character map ID" maxlength="4">
            <div class="button-container">
                <button type="submit" id="idSearchButton">Search by ID</button>
            </div>
        </form>
    </div>
    <div id="searchResultsContainer">
        <h3>Results</h3>
        <div id="mapListContainer" data-columns="2">
            <p>Select a chest combination and click 'Show Maps' or search by ID.</p>
        </div>
    </div>
</div>

<div id="allMapsTab" class="tabcontent" style="display:none;">
        <h2>All Maps</h2>
        <p>A complete view of all maps currently in the database, sorted by chest type.</p>
        
        <div id="allMapsControlsContainer">
            <label for="allMapsColumnSelector">Columns:</label>
            <select id="allMapsColumnSelector">
                <option value="1">1</option>
                <option value="2" selected>2</option>
                <option value="3">3</option>
                <option value="4">4</option>
            </select>
            <button type="button" id="loadAllMapsButton">Load All Maps</button>
        </div>
        
        <div id="allMapsListContainer" data-columns="2">
            <p>Click the "Load All Maps" button to view.</p>
        </div>
    </div>

            <div id="newMapTab" class="tabcontent">

                <div id="instructions">
                    <h2>Configure Chests and Copies:</h2>
                    
                    <form id="chestForm">
                        <div class="copies-input">
                            <div class="copy-type-container">
                                <div class="copy-option">
                                    <img src="copy.png" alt="Exact Copy">
                                    <input type="radio" name="copyType" value="copy.png" id="exactCopy" checked>
                                </div>
                                <div class="copy-option">
                                    <img src="copy2.png" alt="Almost Copy">
                                    <input type="radio" name="copyType" value="copy2.png" id="almostCopy">
                                </div>
                            </div>
                            <select id="copies" name="copies">
                                <option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option>
                            </select> of
                            <select id="copies2" name="copies2">
                                <option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option>
                            </select>
                        </div>
                    
                        <div class="chest-input">
                            <img src="chests1.png" alt="Small Chest">
                            <select id="smallChests" name="smallChests">
                                <option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option>
                            </select>
                        </div>
                        
                        <div class="chest-input">
                            <img src="chests2.png" alt="Medium Chest">
                            <select id="mediumChests" name="mediumChests">
                                <option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option>
                            </select>
                        </div>
                        
                        <div class="chest-input">
                            <img src="chests3.png" alt="Large Chest">
                            <select id="largeChests" name="largeChests">
                                <option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option>
                            </select>
                        </div>
                        
                        <div class="chest-input">
                            <img src="chests4.png" alt="Extra Large Chest">
                            <select id="extraLargeChests" name="extraLargeChests">
                                <option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option>
                            </select>
                        </div>
                    </form>
                </div>

                <form id="boardForm">
                    <div class="grid"></div>
                </form>

                <div id="notesContainer">
                    <h2>Map Notes (Optional)</h2>
                    <div id="editor"></div>
                </div>

                <div class="button-container">
                    <button type="button" id="generateButton">Generate Preview</button>  
                    <button type="button" id="clearAllButton">Clear All</button> 
                </div>
<div class="button-container">
    <button type="button" id="exportJsonButton">Export to Text</button>
    <button type="button" id="importJsonButton">Import from Text</button>
</div>

<div id="jsonTextContainer" style="display: none;">
    <h3 id="jsonTextTitle">JSON Data</h3>
    <textarea id="jsonTextArea" rows="10" placeholder="Paste or copy JSON data here..."></textarea>
    <div class="button-container">
        <button type="button" id="copyJsonTextButton">Copy to Clipboard</button>
        <button type="button" id="loadJsonTextButton">Load Data</button>
        <button type="button" id="closeJsonTextButton">Close</button>
    </div>
</div>

                <div id="saveControls" style="display:none;">
                    <h2>Save Map</h2>
                    <div class="button-container">
                        <button type="button" id="saveToDbButton">Save New Map to Database</button>
                    </div>
                    <p id="saveStatus"></p>
                </div>


                <div id="codeIOContainer" style="display: none;"> 
                    <h2>Board Code (Debug/Legacy)</h2>
                    <textarea id="boardCodeArea" rows="10" placeholder="Generated code will appear here."></textarea>
                    <div class="button-container">
                        <button type="button" id="loadBoardButton">Load Board from Code</button>
                        <button type="button" id="copyCodeButton">Copy Code</button>
                    </div>
                </div>

                <br><br>
                <h2>Preview</h2>
                <div id="printable">
                    <div id="chestheader">
                        <div class="copies-container" id="copy">
                            <img src="copy.png" alt="Copies" class="chestsimg" id="copyIcon">
                            <span class="copies-text" id="copytxt"></span> 
                            <span class="copies-text"> of </span>
                            <span class="copies-text" id="copy2txt"></span>
                            </div>
                        <div class="chest-container" id="sm">
                            <img src="chests1.png" alt="Small Chest" class="chestsimg">
                            <span class="chests" id="smtxt"></span>
                            </div>
                        <div class="chest-container" id="md">
                            <img src="chests2.png" alt="Medium Chest" class="chestsimg">
                            <span class="chests" id="mdtxt"></span>
                            </div>
                        <div class="chest-container" id="lg">
                            <img src="chests3.png" alt="Large Chest" class="chestsimg">
                            <span class="chests" id="lgtxt"></span>
                            </div>
                        <div class="chest-container" id="xl">
                            <img src="chests4.png" alt="Extra Large Chest" class="chestsimg">
                            <span class="chests" id="xltxt"></span>
                        </div>
                    </div>
                    <div id="window">
                        <div class="column">
                            <div id="boardTL"></div>
                            <div id="boardBL"></div>
                            </div><div class="column">
                            <div id="boardTR"></div>
                            <div id="boardBR"></div>
                        </div>
                        
                    </div>
                    <div id="chestfooter">
                    <div id="customNotesPreviewContainer" class="ql-snow">
                    <div id="customNotesPreview" class="ql-editor"></div>
                    </div>
                        <div id="line1">Green spots have treasure chests.</div>
                            <div id="line2">Brown spots don't have treasure chests.</div>
                    </div>
                </div>
                <br><br>

            </div> 
            
            </div> <script src="https://cdn.jsdelivr.net/npm/quill@2.0.2/dist/quill.js"></script>
<script type="module" src="js/app.js"></script>
<script type="module" src="js/database.js"></script>

		<footer>This website is a fan-made creation designed to provide an easy map builder tool for game maps. All artwork is the property of Scopely and is used under fair use for non-commercial, educational purposes. The map guides were sourced from TH Tips on Facebook. This site was independently created by a fan for the purpose of assisting the gaming community. It is not affiliated with, endorsed by, or sponsored by Scopely or any other official entity.</footer>
	</body>
</html>